# to check my messaging history
my_id = 1
messagesWithUser1 = messages.filter(sender_id=my_id) | messages.filter(receiver_id=my_id)

# find each user i have messaged with
chatHistory = {}
for each message in messagesWithUser1.sorted('timestamp', reverse=True):
    other = message.receiver_id if message.sender_id == my_id else message.sender_id
    if other not in chatHistory:
        chatHistory[other] = []
    chatHistory[other].append(message)


for chat in chatHistory:
    # create chat
    for message in chatHistory[chat]:
        if message.sender_id == my_id:
            # maybe also move it to the right
            print("me: ", message.text)
        else:
            # maybe also move it to the left
            print("them: ", message.text)  